<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./animad-keepers-generic-list.html">

<!-- GENERATOR pattern: [DOMAINNAME]-[ENTITYNAME]-list -->

<dom-module id="animad-keepers-table">
    <template>

      <animad-keepers-generic-list
          id="list"
          name=""
          url="[[url]]"
          default-search='[[defaultSearch]]'
          display-type='table'
          show-icons='[[showIcons]]'
          load-complete-data="[[loadCompleteData]]"
          edit-path="[[editPath]]"
          create-path="[[createPath]]"
          on-filter-data="[[filterData]]"
          filtered-data="[[filteredData]]"
          all-filters-url="[[allFiltersUrl]]"
          results-text="{{_resultsText}}"
          resources="[[resources]]" lang="[[lang]]"
          multi-sort="[[multiSort]]"
          hide-header="[[hideHeader]]"
          hide-new="[[hideNew]]"
          hide-delete="[[hideDelete]]"
          hide-edit="[[hideEdit]]"
          hide-filter="[[hideFilter]]"
          disable-filter="[[disableFilter]]"
          disable-delete="[[disableDelete]]"
          disable-new="[[disableNew]]"
          icon="[[icon]]"
          show-results="[[showResults]]"
          resultsText="[[resultsText]]"
          resources="[[resources]]" lang="[[lang]]">
      </animad-keepers-generic-list>
    </template>

    <script>
      // GENERATOR pattern (camel case): [DOMAINNAME][ENTITYNAME]List
      /**
       * `animad-keepers-table` ist eine Tabelle zur Anzeige von Wärtern, die über die angegebene [url](#/elements/animad-keepers-list#property-url)
       * gesucht werden.
       *
       * Zur Suche können Suchbegriffe eingegeben werden, um die Anzahl der gefundenen Datensätze zu begrenzen. Diese Suchbegriffe können
       * auch als Standard für die Liste festgelegt werden.
       *
       * Die gefundenen Datensätze können sortiert, selektiert und gelöscht werden.
       *
       * Die Navigation auf die Forms [`<animad-keeper-create-form>`](#/elements/animad-keeper-create-form)
       * und [`<animad-keeper-update-form>`](#/elements/animad-keeper-update-form)
       * zur Neuanlage bzw. zum Editieren eines Datensatzes ist möglich.
       *
       * #### Beispiel:
       *
       *     <animad-keepers-table name=""
       *       url="http://localhost:39146/keepers"
       *       default-search='vorname:hans nachname:dampf'
       *       route="{{subroute}}"
       *       edit-path="/keepers-view/edit"
       *       create-path="/keepers-view/create">
       *     </animad-keepers-table>
       *
       * @polymer
       * @customElement
       * @appliesMixin AnimadListBehavior
       **/
      class AnimadKeepersTable extends Polymer.Element {

        static get is() { return 'animad-keepers-table'; }

        static get properties() {
          return {
            /*
              * `data` enthält die ungefilterten, gefundenen Datensätze als Array.
              */
              data: {
              type: Array,
              value() {
                return [];
              }
            },
            /*
            *  filteredData enthält alle Objekte, die auf angegebene oder ausgewählte Filter zutreffen.
            *  Die Liste zeigt die Einträge aus filteredData an.
            */
            filteredData: {
              type: Array,
              value() {
                return this.data;
              }
            },
            /*
            * Das `allFiltersUrl` property gibt an, über welche URL selektierbare Filter geladen werden können.
            * Die Antwort muss ein REST-Objekt mit folgender Struktur sein:

            * `{"filters": [{id, [{id, label}, {id2, label2}, ...}, {id2, [{id, label}, ...]}, ...]}`
            *
            * Ist `allFiltersUrl` nicht gesetzt, so wird der Filter-Button im Suche- bzw. Filter-Feld nicht angezeigt.
            *
            * `filters.id` und `filters.filters.label` können lokalisiert werden. Beispiel für ein allFilters Objekt:
            *
            *     { "filters" : [
            *          {
            *            "id": "birthday",
            *            "filters": [
            *              {"id": "0", "label": "filter_birthday_before_1980"},
            *              {"id": "1", "label": "filter_birthday_1980_1990"},
            *              {"id": "2", "label": "filter_birthday_after_1990"}
            *            ]
            *          },
            *          {
            *            "id": "salary",
            *            "filters": [
            *              {"id": "0", "label": "filter_salary_less_1000"},
            *              {"id": "1", "label": "filter_salary_1000_2000"},
            *              {"id": "2", "label": "filter_salary_2000_3000"},
            *              {"id": "3", "label": "filter_salary_more_3000"}
            *            ]
            *          }
            *        ] }
            *
            * Werden selektierbare Filter verwendet, so muss die Methode
            * [`_useSelectedFilters`](#/elements/animad-keepers-list#method-_useSelectedFilters) implementiert werden.
            */
            allFiltersUrl: {
              type: String
            },
            /*
            * `defaultSearch` enthält die Vorbelegung für den Suche-String, der im Suche-Feld beim Öffnen der Liste angezeigt wird.
            */
            defaultSearch: {
              type: String,
              value: ""
            },
            // backend stuff
            /*
            *   `url` ist die URL zur Backend-Suche
            */
              url: {
                type: String,
                value: ""
              },
              /*
              *`multiSort` gibt an, ob in der Tabelle nach mehreren Feldern sortiert
              * werden kann (multi-sort = "true") oder nicht (multi-sort = "false").
              * Standard: `false`
              */
              multiSort: {
              type: Boolean,
              value: false
              },
              /*
              * `hideHeader` gibt an, ob der Listen-Header angezeigt werden soll oder nicht.
              * Beim Setzen des Attributs "hide-header" wird der Header nicht angezeigt.
              */
              hideHeader: {
              type: Boolean,
              value: false
              },
              /*
              * `hideNew` gibt an, ob der Neu-Button angezeigt werden soll oder nicht.
              * Beim Setzen des Attributs "hide-new" wird der Button nicht angezeigt.
              */
              hideNew: {
              type: Boolean,
              value: false
              },
              /*
              * `hideDelete` gibt an, ob die Löschen-Buttons im Listen-Header und in den Listen-Zeilen
              * angezeigt werden sollen oder nicht.
              * Beim Setzen des Attributs "hide-delete" werden die Buttons nicht angezeigt.
              */
              hideDelete: {
              type: Boolean,
              value: false
              },
              /*
              * `hideEdit` gibt an, ob die Edit-Buttons in den Listen-Zeilen
              * angezeigt werden sollen oder nicht.
              * Beim Setzen des Attributs "hide-edit" werden die Buttons nicht angezeigt.
              */
              hideEdit: {
              type: Boolean,
              value: false
              },
              /*
              * `hideFilter` gibt an, ob der Filter-Button im Listen-Header
              * angezeigt werden soll oder nicht.
              * Beim Setzen des Attributs "hide-filter" wird der Button nicht angezeigt.
              */
            hideFilter: {
              type: Boolean,
              value: false
            },
            /*
            * `disableFilter` gibt an, ob der Filter-Button im Listen-Header
            * deaktiviert werden soll oder nicht.
            * Beim Setzen des Attributs "disable-filter" wird der Button deaktiviert.
            */
            disableFilter: {
              type: Boolean,
              value: false
            },
            /*
              * `disableDelete` gibt an, ob die Löschen-Buttons im Listen-Header und in den Listen-Zeilen
              * deaktiviert werden sollen oder nicht.
              * Beim Setzen des Attributs "disable-delete" werden die Buttons deaktiviert.
              */
            disableDelete: {
              type: Boolean,
              value: false
            },
            /*
            * `disableNew` gibt an, ob der Neu-Button im Listen-Header
            * deaktiviert werden soll oder nicht.
            * Beim Setzen des Attributs "disable-new" wird der Button deaktiviert.
            */
            disableNew: {
              type: Boolean,
              value: false
            },
            /*
            * `createPath` gibt an, auf welche Seite die Navigation wechseln soll, wenn der Neu-Button geklickt wurde.
            */
            createPath: {
              type: String
            },
            /*
            * `editPath` gibt an, auf welche Seite die Navigation wechseln soll, wenn der Edit-Button zu einem Datensatz geklickt wurde.
            */
            editPath: {
              type: String
            },
            /*
              * `icon` gibt an, welcher Icon im Suche-Hintergrund angezeigt werden soll.
              */
            icon: {
              type: String,
              value: 'search'
            },
            /*
              * `loadCompleteData` gibt an, ob beim Öffnen der Liste sofort alle Datensätze gesucht werden sollen
              * (Attribut load-complete-data="true") oder nicht (Standard). Ist `loadCompleteData` auf false gesetzt,
              * dann kann vor der Suche im Suche-Feld ein Wert mit folgenden Patterns eingegeben werden:
              *
              * "<wert>": Das Backend sucht in allen mit in der Barrakuda DSL "searchable" markierten Feldern nach dem eingegebenen <wert>.
              * "<tabellenname>:<wert>": Der `<tabellenname>` wird auf den entsprechenden Feldnamen im Backend gemappt und das Backend sucht den <wert> im entsprechenden Feld.
              *
            */
            loadCompleteData: {
              type: Boolean,
              value: false
            },
            /*
            * `showResults` gibt an, ob angezeigt werden soll, wieviele Datensätze gefunden wurden.
            */
            showResults: {
              type: Boolean,
              value: true
            },
            /*
            * Der Text der angezeigt wird, um die Anzahl der gefundenen Datensätze anzuzeigen.
            * Kann zur Lokalisierung verwendet werden.
            */
            resultsText:{
              type: String
            },            
            showIcons: {
              type: Boolean,
              value: false //standardmäßig die Icons NICHT anzeigen
            }
          }
        }

      }

      customElements.define(AnimadKeepersTable.is, AnimadKeepersTable);
    </script>

  </dom-module>
